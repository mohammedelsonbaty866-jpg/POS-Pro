<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø´Ø§Ù…Ù„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Tahoma,Arial;background:#f4f6f8;margin:0}
header{background:#0d6efd;color:#fff;padding:15px;text-align:center;font-size:20px}
nav{display:flex;flex-wrap:wrap;background:#fff;border-bottom:1px solid #ddd}
nav button{flex:1;padding:10px;border:none;background:none;font-size:14px;cursor:pointer}
nav button.active{background:#0d6efd;color:#fff}
.container{padding:15px}
.box{background:#fff;padding:15px;margin-bottom:10px;border-radius:5px}
input,select,button{width:100%;padding:10px;margin-top:5px;font-size:15px}
button.primary{background:#0d6efd;color:#fff;border:none}
hr{margin:15px 0}
</style>
</head>

<body>

<header>ğŸ“Š Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø´Ø§Ù…Ù„</header>

<nav>
<button class="active" onclick="showSection('dashboard',this)">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
<button onclick="showSection('products',this)">Ø§Ù„Ø£ØµÙ†Ø§Ù</button>
<button onclick="showSection('sales',this)">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
<button onclick="showSection('purchases',this)">Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</button>
<button onclick="showSection('expenses',this)">Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</button>
<button onclick="showSection('reports',this)">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
<button onclick="showSection('settings',this)">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
</nav>

<div class="container">

<div id="dashboard" class="box">
<h3>Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹</h3>
<p>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø­Ø§Ø³Ø¨ÙŠ ÙŠØ¹Ù…Ù„ Ø£ÙˆÙÙ„Ø§ÙŠÙ† Ù„Ø£ÙŠ Ù†Ø´Ø§Ø·</p>
</div>

<div id="products" class="box" style="display:none">
<h3>ğŸ“¦ Ø§Ù„Ø£ØµÙ†Ø§Ù</h3>
<input id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
<input id="productPrice" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹">
<input id="productQty" type="number" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
<button class="primary" onclick="addProduct()">â• Ø¥Ø¶Ø§ÙØ©</button>
<div id="productList"></div>
</div>

<div id="sales" class="box" style="display:none">
<h3>ğŸ§¾ ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹</h3>
<select id="saleProduct"></select>
<input type="number" id="saleQty" value="1" min="1">
<button class="primary" onclick="addToInvoice()">â• Ø¥Ø¶Ø§ÙØ©</button>
<hr>
<div id="invoiceItems"></div>
<hr>
<p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <b id="subTotal">0</b></p>
<p id="taxRow" style="display:none">Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©: <b id="taxAmount">0</b></p>
<p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: <b id="grandTotal">0</b></p>
<button onclick="printInvoice()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
<button class="primary" onclick="saveInvoice()">ğŸ’¾ Ø­ÙØ¸</button>
</div>

<div id="purchases" class="box" style="display:none">
<h3>ğŸ§¾ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡</h3>
<select id="purchaseProduct"></select>
<input id="newProductName" placeholder="Ø§Ø³Ù… ØµÙ†Ù Ø¬Ø¯ÙŠØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
<input id="purchasePrice" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡">
<input id="purchaseQty" type="number" value="1">
<button class="primary" onclick="addPurchase()">â• Ø¥Ø¶Ø§ÙØ©</button>
<hr>
<div id="purchaseItems"></div>
<p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <b id="purchaseTotal">0</b></p>
<button class="primary" onclick="savePurchase()">ğŸ’¾ Ø­ÙØ¸</button>
</div>

<div id="expenses" class="box" style="display:none">
<h3>ğŸ’¸ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>
<select id="expenseType">
<option>Ø¥ÙŠØ¬Ø§Ø±</option>
<option>ÙƒÙ‡Ø±Ø¨Ø§Ø¡</option>
<option>Ù…ÙŠØ§Ù‡</option>
<option>Ø±ÙˆØ§ØªØ¨</option>
<option>Ø£Ø®Ø±Ù‰</option>
</select>
<input id="expenseDesc" placeholder="Ø§Ù„ÙˆØµÙ">
<input id="expenseAmount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
<button class="primary" onclick="addExpense()">â• Ø¥Ø¶Ø§ÙØ©</button>
<hr>
<div id="expenseList"></div>
</div>

<div id="reports" class="box" style="display:none">
<h3>ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>
<button onclick="showSalesReport()">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</button>
<button onclick="showProfitReport()">Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ÙˆØ§Ù„Ø®Ø³Ø§Ø¦Ø±</button>
<button onclick="showStockReport()">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</button>
<div id="reportResult"></div>
</div>

<div id="settings" class="box" style="display:none">
<h3>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h3>
<select id="taxEnabled">
<option value="false">Ø¨Ø¯ÙˆÙ† Ø¶Ø±ÙŠØ¨Ø©</option>
<option value="true">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©</option>
</select>
<input id="taxRate" type="number" placeholder="Ù†Ø³Ø¨Ø© Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© %">
<button class="primary" onclick="saveSettings()">ğŸ’¾ Ø­ÙØ¸</button>
</div>

</div>

<script>
function showSection(id,btn){
document.querySelectorAll('.box').forEach(d=>d.style.display='none');
document.getElementById(id).style.display='block';
document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
btn.classList.add('active');
}

let products=JSON.parse(localStorage.getItem('products')||'[]');
let sales=JSON.parse(localStorage.getItem('sales')||'[]');
let purchases=JSON.parse(localStorage.getItem('purchases')||'[]');
let expenses=JSON.parse(localStorage.getItem('expenses')||'[]');
let settings=JSON.parse(localStorage.getItem('settings')||'{}');

function addProduct(){
products.push({name:productName.value,price:+productPrice.value,qty:+productQty.value});
localStorage.setItem('products',JSON.stringify(products));
productName.value=productPrice.value=productQty.value='';
renderProducts();loadProducts();
}

function renderProducts(){
productList.innerHTML='';
products.forEach(p=>productList.innerHTML+=`<div>${p.name} | ${p.price} | Ø§Ù„ÙƒÙ…ÙŠØ© ${p.qty}</div>`);
}

let invoice=[];
function loadProducts(){
saleProduct.innerHTML=purchaseProduct.innerHTML='';
products.forEach((p,i)=>{
saleProduct.innerHTML+=`<option value="${i}">${p.name}</option>`;
purchaseProduct.innerHTML+=`<option value="${i}">${p.name}</option>`;
});
}

function addToInvoice(){
let p=products[saleProduct.value];
let q=+saleQty.value;
invoice.push({name:p.name,qty:q,total:p.price*q});
renderInvoice();
}

function renderInvoice(){
let s=0;
invoiceItems.innerHTML='';
invoice.forEach(i=>{s+=i.total;invoiceItems.innerHTML+=`<div>${i.name} Ã— ${i.qty} = ${i.total}</div>`});
subTotal.innerText=s;
let tax=settings.taxEnabled? s*(settings.taxRate/100):0;
taxRow.style.display=settings.taxEnabled?'block':'none';
taxAmount.innerText=tax;
grandTotal.innerText=s+tax;
}

function saveInvoice(){
invoice.forEach(i=>products.find(p=>p.name==i.name).qty-=i.qty);
sales.push({id:Date.now(),total:+grandTotal.innerText,date:new Date().toLocaleString('ar-EG')});
localStorage.setItem('sales',JSON.stringify(sales));
localStorage.setItem('products',JSON.stringify(products));
invoice=[];renderInvoice();renderProducts();
alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©');
}

function printInvoice(){window.print();}

let purchaseInvoice=[];
function addPurchase(){
purchaseInvoice.push({name:newProductName.value||products[purchaseProduct.value].name,price:+purchasePrice.value,qty:+purchaseQty.value});
renderPurchase();
}

function renderPurchase(){
let t=0;purchaseItems.innerHTML='';
purchaseInvoice.forEach(i=>{t+=i.price*i.qty;purchaseItems.innerHTML+=`<div>${i.name} Ã— ${i.qty}</div>`});
purchaseTotal.innerText=t;
}

function savePurchase(){
purchaseInvoice.forEach(i=>{
let p=products.find(x=>x.name==i.name);
p?p.qty+=i.qty:products.push({name:i.name,price:i.price,qty:i.qty});
});
localStorage.setItem('products',JSON.stringify(products));
purchaseInvoice=[];renderPurchase();renderProducts();loadProducts();
alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª');
}

function addExpense(){
expenses.push({type:expenseType.value,desc:expenseDesc.value,amount:+expenseAmount.value});
localStorage.setItem('expenses',JSON.stringify(expenses));
expenseDesc.value=expenseAmount.value='';
renderExpenses();
}

function renderExpenses(){
expenseList.innerHTML='';
expenses.forEach(e=>expenseList.innerHTML+=`<div>${e.type} - ${e.amount}</div>`);
}

function showSalesReport(){
reportResult.innerHTML='';
sales.forEach(s=>reportResult.innerHTML+=`<div>ÙØ§ØªÙˆØ±Ø© ${s.id} : ${s.total}</div>`);
}

function showProfitReport(){
let s=sales.reduce((a,b)=>a+b.total,0);
let e=expenses.reduce((a,b)=>a+b.amount,0);
reportResult.innerHTML=`<h3>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­: ${s-e}</h3>`;
}

function showStockReport(){
reportResult.innerHTML='';
products.forEach(p=>reportResult.innerHTML+=`<div>${p.name} : ${p.qty}</div>`);
}

function saveSettings(){
settings={taxEnabled:taxEnabled.value==='true',taxRate:+taxRate.value};
localStorage.setItem('settings',JSON.stringify(settings));
alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª');
}

renderProducts();renderExpenses();loadProducts();
</script>

</body>
</html>
